# Logger组件设计文档

## 通用Logger脚本
### 核心目标
- 捕获目标对象的字段和属性值
- 在Inspector中动态显示捕获的变量，允许用户选择需要打印的变量
- 支持在运行时或编辑器模式中打印选中的变量值，帮助调试目标对象的状态

### 功能模块设计
#### 变量捕获
- 使用反射自动获取目标对象的字段和属性信息
- 提供一个接口`CaptureValues`, 将变量名和值存储到一个字典中
#### 动态显示变量
- 在Inspector中，动态显示从目标对象捕获的变量
- 提供复选框，供用户选择要打印的变量
- 通过自定义编辑器，实时更新选中的变量列表
#### 控制打印
- 提供选择控制打印行为：
    - 运行时自动打印
    - 手动触发打印
- 打印时只输出用户勾选的变量
#### 用户操作流程

- 附加 Logger 组件：
    - 将 Logger 脚本附加到任意 GameObject。
- 设置目标对象：
    - 在 Logger 的 Inspector 面板中设置目标对象（通常是需要调试的脚本）。
- 捕获变量：
    - 点击 “捕获变量” 按钮，Logger 会自动提取目标对象的所有字段和属性，并在 Inspector 中显示。
- 选择变量：
    - 在 Inspector 中勾选需要打印的变量。
- 打印变量：
    - 手动点击 “打印选中的变量” 按钮，或启用 Log On Start 在运行时自动打印。

#### 实现概览
- 核心脚本 `Logger`
    - 实现变量捕获和打印的核心逻辑
    - 动态管理捕获的变量和值
- 自定义编辑器 `LoggerEditor`
    - 提供用户友好的界面

#### 问题
- 局部变量捕获：
   - 增加一个接口，允许开发者手动注册局部变量或动态状态，并通过 LoggerManager 输出。
- 异步日志输出：
   - 将日志输出（特别是文件写入或网络发送）放到异步线程中，避免阻塞主线程。
   - 使用日志队列或缓冲区提高性能。
- 复杂对象支持：
   - 增加递归解析逻辑，支持打印复杂对象（如嵌套类型、集合）。
   - 提供选项，让用户选择是否深度解析复杂对象。


## Logger Manager设计目标
- 集中管理：将场景中所有附着 Logger 的组件集中到一个 LoggerManager 中进行统一管理。
- 灵活配置：通过配置文件或 Inspector 定义每个 Logger 的优先级、输出格式和发送顺序。
- 格式化日志输出：统一定义日志的输出格式（如 JSON、表格格式等），方便阅读和存储。
- 分发机制：控制日志的发送方式，例如打印到 Console、存储到文件、或通过网络发送到远程服务器。

#### 拓展
- 日志分组：
    - 按类别或模块分组日志，例如“玩家状态日志”“网络日志”等。

- 实时控制：
    - 提供一个运行时 UI，让用户动态启用/禁用日志，调整优先级等。

- 格式灵活性：
    - 提供多种预定义格式（JSON、纯文本等），通过配置切换格式。

- 多线程日志：
    - 对于频繁日志输出的场景，使用线程安全的队列处理日志，避免主线程卡顿。

- 性能优化：
    - 限制日志输出频率，例如设置日志刷新间隔时间（如每秒一次）。
    
## LogSender
- 接收LoggerManager发送的日志，并进行处理
- 日志可视化工具：
   - 提供一个可视化的日志分析工具（如 Unity 的 Editor 扩展窗口），让开发者可以直接在 Editor 中筛选和分析日志。